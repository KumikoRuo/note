# 概述

设计模式描述了针对特定问题的简洁而优雅的求解方案。



设计可复用的面向对象软件，要做到：

1. 发掘对象，以适当粒度将它们归类
2. 定义接口和继承层次，建立对象之间的基本关系
3. 设计应该对手头的问题有针对性，同时对将来的问题和需求也要有足够的通用性

这种设计上的权衡是很难把握的。好在我们可以站在「设计模式」巨人的肩膀上，给出优秀的设计方案。



一个模式的基本要素：

1. 模式名（pattern name）：概述了模式的问题、解决方案和效果
2. 问题（problem）：阐述了问题本身。换句话说，何时使用该模式
3. 解决方案（solution）：描述了问题的通用解决思路
4. 效果（consequence）：表述了该模式的效果，以及使用该模式需要权衡的问题



不同的语言在表述设计模式上的难易程度有所不同。



设计模式总览：

- 工厂（Factory Method）：在父类中提供一个创建对象的方法， 允许子类决定实例化对象的类型
- 抽象工厂（Abstract Factory）：创建一系列相关的对象， 而无需指定其具体类
- 建造者（Builder）：分步骤创建复杂对象
- 原型（Prototype）：复制已有对象， 而又无需依赖它们所属的类
- 单例（Singleton）：保证一个类只有一个实例， 并提供一个访问该实例的全局节点



- 适配器（Adapter）：使接口不兼容的对象能够相互合作
- 桥接（Bridge）：将一个大类或一系列紧密相关的类拆分为抽象和实现两个独立的层次结构
- 组合（Composite）：将对象组合成树形结构，以表示「部分—整体」的层次结构，并使得客户对单个对象和复合对象的使用具有一致性
- 装饰器（Decorator）：通过将对象放入包含行为的特殊封装对象中，来为原对象绑定新的行为。
- 门面（Facade）：为程序库、 框架或其他复杂类提供一个简单的接口
- 享元（Flyweight）：运用共享技术有效地支持大量细粒度的对象
- 代理（Proxy）：为其他对象提供某个对象的代理，以控制对其访问



- 责任链（Chain of Responsibility）： 将请求沿着处理者链进行发送。 收到请求后， 每个处理者均可对请求进行处理， 或将其传递给链上的下个处理者。
- 命令（Command）：将请求转换为一个包含与请求相关信息的独立对象。 该转换可以根据不同的请求将方法参数化；或将其放入队列中， 以及执行可撤销操作。
- 解释器（Interpreter）：给定一个语言，定义它的文法的一种表示，并定义一个解释器，这个解释器使用该表示来解释语言中的句子
- 迭代器（Iterator）：在不暴露集合底层表现形式 （列表、 栈和树等） 的情况下遍历集合中所有的元素。
- 中介器（Mediator）：用一个中介对象来封装一系列的对象交互
- 备忘录（Memento）：允许在不暴露对象实现细节的情况下，保存和恢复对象之前的状态。
- 观察者（Observer）： 定义一种订阅机制， 可在事件发生时通知多个 “观察” 该对象的其他对象，用于处理对象之间的一对多依赖关系。
- 状态机（State）：允许一个对象在其内部状态改变时改变它的行为，使其看上去就像改变了自身所属的类一样。
- 策略（Strategy）：定义并封装一系列的算法，而且使它们可相互替换
- 模板（Template Method）：在父类中定义算法步骤的骨架，而将一些步骤延迟到子类中



设计模式按照目的可以分类为：

- 创建型（creational）：与对象创建有关
- 结构型（structural）：处理类或对象之间的关系
- 行为型（behavioral）：处理类或对象之间的交互以及职责划分

按照适用范围可以划分为：

- 类：处理类之间的继承关系，在编译器确定下来的
- 对象：处理对象之间的关系，在运行期是可以动态变化的

|      | 创建型                                                   | 结构型                                                       | 行为型                                                       |
| ---- | -------------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 类   | Factory Method                                           | Adapter                                                      | Interpreter<br/>Template Method                              |
| 对象 | Abstract Factory<br/>Builder<br/>Prototype<br/>Singleton | Adapter<br/>Bridge<br/>Composite<br/>Decorator<br/>Facade<br/>Flyweight<br/>Proxy | Chain of Responsibility<br/>Command<br/>Iterator<br/>Mediator<br/>Memento<br/>Observer<br/>State<br/>Strategy<br/>Visitor |